<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
>

    <ui:composition template="WEB-INF/DefaultTemplateOneColumn.xhtml">

        <f:metadata>
            <ui:remove>
                <!-- KANN GET-PARAMETER ENTGEGENNEHMEN UND WEITERREICHEN    -->
                <!-- <f:viewParam name="foo" value="#{bean.foo}" />-->
                <!-- FÜHRT METHODEN BEI PAGELOAD AUS-->
            </ui:remove>
            <f:viewAction action="#{backingBeanUser.getAllUsers()}" />
        </f:metadata>

        <ui:param name="active" value="User" />
        <ui:param name="title" value="User Übersicht" />

        <ui:define name="titleHeader">
            <h2>#{title}</h2>
        </ui:define>

        <ui:define name="mainContent">

            <h:dataTable value="#{backingBeanUser.getAllUsersProxy()}" var="u" class="table">
                <h:column>
                    <f:facet name="header">Vorname</f:facet>
                    #{u.firstname}
                </h:column>
                <h:column>
                    <f:facet name="header">Nachname</f:facet>
                    #{u.lastname}
                </h:column>
                <h:column>
                    <f:facet name="header">Ort</f:facet>
                    #{u.addressLiving.city}
                </h:column>
                <h:column>
                    <h:form rendered="#{loginController.isLoggedInUser(u)}">
                        <ui:remove> <!--rendered="#{loginController.isLoggedInUser(u)}">-->
<!--                        <h:commandLink  action="#{backingBeanUser.edit(u)}"  a:disabled="#{not loginController.isLoggedInUser(u)}" style="float:left; " class="btn btn-warning"><i class="far fa-edit" aria-hidden="true"></i></h:commandLink>-->
<!--                        <h:commandLink  action="#{backingBeanUser.delete(u)}" a:disabled="#{not loginController.isLoggedInUser(u)}" class="btn btn-danger"><i class="fas fa-trash-alt" aria-hidden="true"></i></h:commandLink>-->
<!--                                                    -->
<!--                                FUNKTIONIERT NICHT-->
<!--                            <c:choose>-->
<!--                                <c:when test="#{loginController.isLoggedInUser(u)}">-->
<!--                                    <h:commandLink  action="#{backingBeanUser.edit(u)}"   class="btn btn-warning" style="float:left; "><i class="far fa-edit" aria-hidden="true"></i></h:commandLink>-->
<!--                                </c:when>-->
<!--                                <c:otherwise>-->
<!--                                    <h:commandLink  class="btn btn-danger"  style="opacity: 0.5"><i class="fas fa-trash-alt" aria-hidden="true"></i></h:commandLink>-->
<!--                                </c:otherwise>-->
<!--                            </c:choose>-->

                        </ui:remove>

                        <h:commandLink  action="#{backingBeanUser.edit(u)}"   style="float:left; " class="btn btn-warning"><i class="far fa-edit" aria-hidden="true"></i></h:commandLink>
                        <h:commandLink  action="#{backingBeanUser.delete(u)}"  class="btn btn-danger"><i class="fas fa-trash-alt" aria-hidden="true"></i></h:commandLink>
                    </h:form>

                    <h:form rendered="#{not loginController.isLoggedInUser(u)}">
                        <h:commandLink class="btn btn-warning"  style="float:left; opacity: 0.1; " ><i class="far fa-edit" aria-hidden="true"></i></h:commandLink>
                    <h:commandLink     class="btn btn-danger" style="opacity: 0.1; " ><i class="fas fa-trash-alt" aria-hidden="true"></i></h:commandLink>
                    </h:form>

                </h:column>
            </h:dataTable>
            <h:form>
                <h:commandLink action="#{backingBeanUser.createNew}" class="btn btn-primary" style="float:left;">#Restaurantbesuch planen</h:commandLink>
                <h:commandLink action="#{backingBeanUser.createNew}" class="btn btn-primary" >User anlegen</h:commandLink>
            </h:form>

            <p:growl id="growlPassword" showDetail="true" />

        </ui:define>

        <ui:define name="subContent">
            <h1>sub</h1>
        </ui:define>



        <ui:define name="footer">
        </ui:define>

    </ui:composition>
</html>